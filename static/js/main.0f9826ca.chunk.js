(this["webpackJsonpcinema-central"]=this["webpackJsonpcinema-central"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(19),r=n.n(a),c=(n(26),n(15)),i=n(14),o=n(9),l=n(10),h=n(12),u=n(11),d=n(2),j=(n(27),n(7)),m=n(0),g=function(e){var t=e.email,n=e.password,s=e.error,a=e.handleLoginChange,r=e.handleLoginSubmit;return Object(m.jsxs)("form",{children:[s&&Object(m.jsx)("p",{className:"message",children:s}),Object(m.jsx)("input",{type:"email",placeholder:"email",name:"email",value:t,onChange:a,required:!0,className:"text-field"}),Object(m.jsx)("input",{type:"password",placeholder:"password",name:"password",value:n,onChange:a,required:!0,className:"text-field"}),Object(m.jsx)(j.b,{to:"/",onClick:r,children:Object(m.jsx)("button",{className:"login-btn",children:"Log In"})})]})},b=(n(37),n.p+"static/media/img_197388.99f9f5f0.png"),p=n.p+"static/media/reel_swell_guy.ea026696.png",v=function(e){var t=e.loggedIn,n=e.handleChangeInSearch,s=e.searchTerms;return Object(m.jsxs)("header",{children:[Object(m.jsx)(j.b,{to:"/",children:Object(m.jsxs)("article",{className:"title-with-logo",children:[Object(m.jsx)("h1",{className:"title",children:"Cinema Central"}),Object(m.jsx)("img",{className:"clippy",src:p,alt:"cartoon film reel mascot"})]})}),t&&Object(m.jsx)("nav",{children:Object(m.jsxs)("span",{className:"search",children:[Object(m.jsx)("img",{className:"search-icon",onClick:function(){return document.querySelector(".search-bar").classList.toggle("active")},src:b,alt:"search icon"}),Object(m.jsx)("input",{onChange:function(e){return n(e)},name:"searchTerms",value:s,className:"search-bar",type:"text",placeholder:"search by movie title..."})]})})]})},f=(n(38),function(e){var t=e.id,n=e.title,s=e.poster_path,a=e.average_rating,r=e.release_date;return Object(m.jsx)(j.b,{to:"/movies/".concat(t),children:Object(m.jsx)("article",{className:"movie-card",style:{backgroundImage:"url(".concat(s,")"),backgroundSize:"contain"},children:Object(m.jsxs)("div",{className:"text-overlay",children:[Object(m.jsx)("h2",{children:n}),Object(m.jsxs)("p",{children:["Average Rating:",Object(m.jsxs)("span",{className:"yellow",children:[" "+a.toFixed(1)," / 10"]})]}),Object(m.jsxs)("p",{children:["Released:",Object(m.jsx)("span",{className:"yellow",children:" "+r})]})]})})})}),O={getSentiment:function(){return fetch("https://api.dandelion.eu/datatxt/sent/v1/?lang=en&text=Kirk%20Cousins%20surprises%20Vikings%20social%20justice%20committee%20with%20$500000%20donation&token=8e05e6c7e8c24d05bb09b53e7f472df2").then((function(e){return e.json()})).then((function(e){return console.log(e)}))},getUser:function(e,t){var n=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return n.checkResponse(e),e.json()}))},getAllMovies:function(){var e=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies").then((function(t){return e.checkResponse(t),t.json()})).then((function(e){return e.movies}))},getSingleMovie:function(e){var t=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e)).then((function(e){return t.checkResponse(e),e.json()})).then((function(e){return e.movie}))},getSingleMovieVideos:function(e){var t=this;return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e,"/videos")).then((function(e){return t.checkResponse(e),e.json()})).then((function(e){return e.videos}))},checkResponse:function(e){if(!e.ok)throw console.log(e),422===e.status||403===e.status?new Error("Sorry, we can't find an account with these credentials. Please try again."):404===e.status?new Error("The page you are looking for doesn't exist"):e.status>=500?new Error("We're having issues on our end. Please try again later."):new Error("Please check your network connection")}},x=(n(39),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={allMovies:[],filteredMovies:[],error:"",status:"loading"},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.getAllMovies().then((function(t){return e.setState({allMovies:t,error:"",status:"success"})})).catch((function(t){e.setState({error:t.message,status:"error"})}))}},{key:"filterMovies",value:function(){var e=this;return this.state.allMovies.filter((function(t){return-1!==t.title.search(new RegExp(e.props.searchTerms,"i"))}))}},{key:"componentDidUpdate",value:function(){console.log("updated");var e=this.filterMovies();this.state.filteredMovies.length!==e.length&&this.setState({filteredMovies:e})}},{key:"render",value:function(){var e=this.state.status,t=this.state.filteredMovies.map((function(e){return Object(m.jsx)(f,Object(i.a)({},e),e.id)}));return Object(m.jsxs)(m.Fragment,{children:["loading"===e&&Object(m.jsx)("h1",{className:"message",children:"Loading"}),"error"===e&&Object(m.jsx)("h1",{className:"message",children:this.state.error}),"success"===e&&Object(m.jsx)("section",{className:"gallery",children:t})]})}}]),n}(s.Component)),y=(n(40),function(e){var t=e.videoKey;return Object(m.jsx)("iframe",{width:"853",height:"480",src:"https://www.youtube.com/embed/".concat(t),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:"Embedded youtube"},t)}),k=(n(41),n.p+"static/media/placeholder.8f797190.png"),S=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={movie:null,videos:null,error:"",status:"loading"},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Promise.all([O.getSingleMovie(this.props.id),O.getSingleMovieVideos(this.props.id)]).then((function(t){e.setState({movie:t[0],videos:t[1],status:"success",error:""})})).catch((function(t){e.setState({error:t.message,status:"error"})}))}},{key:"formatReleaseDate",value:function(){var e=this.state.movie.release_date;return new Date(e).toLocaleString("en-us",{year:"numeric",month:"long",day:"numeric"})}},{key:"formatGenres",value:function(){return this.state.movie.genres.join("/")}},{key:"render",value:function(){var e=this.state.status,t=this.state,n=t.movie,s=t.videos;return Object(m.jsxs)(m.Fragment,{children:["loading"===e&&Object(m.jsx)("h1",{className:"message",children:"Loading"}),"error"===e&&Object(m.jsx)("h1",{className:"message",children:this.state.error}),"success"===e&&this.state.movie&&Object(m.jsxs)("section",{className:"details-container",children:[Object(m.jsx)(y,{videoKey:s[s.length-1].key}),Object(m.jsx)("section",{className:"details",style:{backgroundImage:"url(".concat(n.backdrop_path?n.backdrop_path:k,")")},children:Object(m.jsxs)("article",{className:"details-wrapper",children:[Object(m.jsxs)("div",{className:"heading",children:[Object(m.jsxs)("h2",{children:[n.title," (",this.formatReleaseDate(),")"]}),n.tagline&&Object(m.jsx)("h3",{children:"".concat(n.tagline)})]}),Object(m.jsx)("p",{className:"overview",children:n.overview}),Object(m.jsxs)("h4",{children:[this.formatGenres()," - ",n.runtime," minutes - ",n.average_rating.toFixed(1)," / 10"]}),Object(m.jsx)(j.b,{to:"/",children:Object(m.jsx)("button",{children:"Home"})})]})})]})]})}}]),n}(s.Component),w=S,N=(n(42),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={credentials:{email:"",password:""},user:{name:"",id:0},searchTerms:"",error:"",status:"loading"},e.handleChangeInSearch=function(t){e.setState({searchTerms:t.target.value})},e.handleLoginChange=function(t){var n=e.state.credentials,s=t.target,a=s.name,r=s.value;e.setState({credentials:Object(i.a)(Object(i.a)({},n),{},Object(c.a)({},a,r))})},e.handleLoginSubmit=function(t){t.preventDefault();var n=e.state.credentials,s=n.email,a=n.password;O.getUser(s,a).then((function(t){var n=t.user,s=n.id,a=n.name;e.setState({user:{id:s,name:a},error:"",status:"success"}),localStorage.setItem("user",JSON.stringify(e.state.user))})).catch((function(t){e.setState({error:t.message,status:"error"})}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem("user")&&this.setState({user:{name:JSON.parse(localStorage.getItem("user")).name,id:JSON.parse(localStorage.getItem("user")).id},error:"",status:"success"}),O.getSentiment()}},{key:"render",value:function(){var e=this;return Object(m.jsxs)(m.Fragment,{children:[this.state.user.id?Object(m.jsx)(d.a,{to:"/"}):Object(m.jsx)(d.a,{to:"/login"}),Object(m.jsx)(v,{loggedIn:!!this.state.user.id,handleChangeInSearch:this.handleChangeInSearch,searchTerms:this.state.searchTerms}),Object(m.jsx)("main",{children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{exact:!0,path:"/login",render:function(){return Object(m.jsx)(g,{data:e.state.credentials,error:e.state.error,handleLoginChange:e.handleLoginChange,handleLoginSubmit:e.handleLoginSubmit})}}),Object(m.jsx)(d.b,{exact:!0,path:"/",render:function(){return e.state.user.id?Object(m.jsx)(x,{searchTerms:e.state.searchTerms}):Object(m.jsx)(d.a,{to:"/login"})}}),Object(m.jsx)(d.b,{path:"/movies/:id",render:function(t){var n=t.match;return e.state.user.id?Object(m.jsx)(w,{id:n.params.id}):Object(m.jsx)(d.a,{to:"/login"})}}),Object(m.jsx)(d.b,{path:"*",children:Object(m.jsx)("p",{children:"The page you are looking for doesn't exist"})})]})}),Object(m.jsx)("footer",{children:Object(m.jsx)("h5",{children:"\xa9 2021"})})]})}}]),n}(s.Component)),C=N;r.a.render(Object(m.jsx)(j.a,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.0f9826ca.chunk.js.map